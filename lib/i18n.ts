'use client';

import { useLanguageStore } from '@/lib/stores/languageStore';

type Language = 'ko' | 'en';
type Messages = Record<string, string>;

const messages: Record<Language, Messages> = {
  ko: {
    languageKorean: '한국어',
    languageEnglish: '영어',
    dashboard: '대시보드',
    greeting: '안녕',
    studentFallback: '학생',
    stagePosition: '당신은 지금 Stage {stage}에 있어요',
    journeyLabel: 'SCOPE+ 여정 지도',
    journeyCurrent: '지금 여기',
    journeySubtitle: '대화 기반, 플레이형 탐색',
    journeyPromptStrengths: '나는 어떤 패턴으로 나타날까?',
    journeyPromptCuriosity: '가벼운 마음으로 더 탐색해보고 싶은 것은?',
    journeyPromptOptions: '어떤 학업 경로가 문을 열어주고 나와 잘 맞을까?',
    journeyPromptProof: '어떤 경험이 내 가정을 지지하거나 흔들까?',
    journeyPromptEvolve: '돌아보며 무엇을 유지·조정·삭제할까?',
    journeyPromptStoryboard: '미래 장면을 그려볼까?',
    stage0Subtitle: '편안한 대화를 통해 당신의 관심사와 선호를 함께 알아가요',
    onboardingTag: '함께 시작해요',
    onboardingTitle: '안녕 {name}, 반가워요!',
    onboardingSubtitle: '함께 이야기하며 친구가 되어요. 생각을 나누고, 원하면 자료도 공유해주세요.',
    onboardingGreeting: '안녕, 나는 미래야. 한 걸음씩 함께 해볼게.',
    onboardingIntro: '학교나 활동을 떠올리면, 보통 무엇이 에너지를 주나요?',
    onboardingQuestion1: '공감되는 것을 눌러보세요.',
    onboardingAnswerProblem: '문제 해결',
    onboardingAnswerHelping: '사람 돕기',
    onboardingAnswerCreating: '새로 만들기',
    onboardingAnswerUnsure: '아직 잘 모르겠어요',
    onboardingFollowUp: '고마워요! 한 가지 더 공유할래요?',
    onboardingThanks: '공유해줘서 고마워요. 준비되면 다음 단계로 넘어가요.',
    onboardingPlaceholder: '생각을 적어주거나, 건너뛰어도 좋아요',
    onboardingUploadCta: '자료 업로드 (포트폴리오, 인증서 등)',
    onboardingUploadConfirm: '자료를 잘 받았어요!',
    onboardingKeywords: '{name}\'s Keywords',
    onboardingNextSteps: '곧 만날 여정들',
    onboardingNextStep1: '나를 더 알아가는 시간',
    onboardingNextStep2: '가능성을 탐색하는 놀이',
    onboardingNextStep3: '미래를 그려보는 순간',
    onboardingFinish: '여정 시작하기',
    stage0Name: '자기이해',
    stage0Description: '당신에 대해 알아가기',
    stage1Name: 'Role Roulette',
    stage1Description: '역할 탐색하기',
    stage2Name: '코스 로드맵',
    stage2Description: '과목 설계하기',
    stage3Name: '스킬 번역',
    stage3Description: '성장 여정 그리기',
    stage4Name: '토너먼트',
    stage4Description: '전문화 좁히기',
    stage5Name: '스토리보드',
    stage5Description: '미래 시각화하기',
    progressLabel: '여정 진행률',
    lockedShort: '잠금',
    start: '시작하기 →',
    complete: '완료됨',
    locked: '이전 단계를 먼저 완료하세요',
    logout: '로그아웃',
    back: '뒤로가기',
    home: '홈',
    settingsOpen: '설정 열기',
    settingsClose: '설정 닫기',
    settingsTitle: '사용자 설정',
    settingsEmailPlaceholder: '이메일 없음',
    settingsAccount: '계정',
    settingsAccountHint: '개인 정보와 여정 설정을 확인하세요.',
    settingsMembership: 'SCOPE+ 멤버',
    settingsStatus: '활성',
    settingsLanguage: '언어',
    settingsLanguageHint: '선호 언어를 전환하세요.',
    // Stage 0
    stage0Question: '당신은 어떤 것들을 잘하나요?',
    stage0OptionAnalytical: '분석적 사고',
    stage0OptionCreative: '창의적 표현',
    stage0OptionEmpathy: '공감 능력',
    stage0OptionOrganization: '체계적 정리',
    stage0Prev: '← 이전',
    stage0Next: '다음 →',
    stage0Complete: '완료',
    stage0ProgressLabel: '질문',
    // Stage 1
    stage1Hint: '← 별로 | 좋아요! | 흥미로워 →',
    // Stage 2
    stage2Title: '과목 선택 설계',
    stage2Subjects: '과목 목록',
    stage2Anchor: '안전한 선택',
    stage2Signal: '탐색 신호',
    stage2AnchorCount: '({count}/6 선택됨)',
    stage2SignalCount: '({count}/6 선택됨)',
    stage2Save: '저장하기',
    // Stage 3
    stage3Title: '스킬 번역',
    stage3Empty: '안녕! 선택한 과목들을 통해 어떤 스킬을 키우고 싶은지 이야기해봐.',
    stage3Loading: 'AI가 입력 중...',
    stage3Placeholder: '당신의 생각을 자유롭게...',
    stage3Send: '전송',
    stage3Finish: '대화 마치기',
    // Stage 4
    stage4Title: '전문화 토너먼트',
    stage4Subtitle: '최대 3개의 전문화 영역을 선택하세요',
    stage4Selected: '선택됨',
    stage4Complete: '선택 완료',
    stage4Alignment: '{value}% 일치',
    specializationUxDesign: 'UX 디자인',
    specializationDataScience: '데이터 사이언스',
    specializationSocialEntrepreneurship: '소셜 앙트레프러너십',
    specializationContentCreation: '콘텐츠 제작',
    // Stage 5
    stage5Title: '스토리보드',
    stage5When: '언제를 보고 싶나요?',
    stage5Timeline1: '1년 후 (2학년)',
    stage5Timeline3: '3년 후 (대학교)',
    stage5Timeline5: '5년 후 (직장)',
    stage5Generate: '스토리보드 생성하기',
    stage5StoryTitle: '당신의 미래 스토리',
    stage5Finish: '완료하기',
    stage5Scene1Time: '8:00 AM',
    stage5Scene1: '아침: 디자인 프로젝트 작업',
    stage5Scene2Time: '10:00 AM',
    stage5Scene2: '수업: 인간 중심 디자인',
    stage5Scene3Time: '2:00 PM',
    stage5Scene3: '팀 미팅: 소셜 임팩트 프로젝트',
    loginHeroTitle: '진로 탐색 여정을 시작하세요',
    loginTestAccounts: '테스트 계정',
    loginPasswordLabel: '비밀번호',
    loginEmailLabel: '이메일',
    loginButton: '로그인',
    loginLoading: '로그인 중...',
    loginNoAccount: '계정이 없나요?',
    loginSignup: '회원가입',
    loginPasswordValue: '비밀번호: password123',
    loginInvalid: '이메일 또는 비밀번호가 올바르지 않습니다',
    loginPasswordHint: 'Password: password123',
    loginUseTest: '테스트 계정을 사용하세요',
    // Signup
    signupHeroTitle: '새로운 여정을 시작하세요',
    signupDisabledTitle: '회원가입이 비활성화되었습니다',
    signupDisabledBody: '아래 테스트 계정을 사용해주세요.',
    signupNameLabel: '이름',
    signupButton: '회원가입',
    signupLoading: '가입 중...',
    signupExistingAccount: '이미 계정이 있나요?',
    signupLogin: '로그인',
    signupDisabledError: '회원가입은 테스트 계정만 지원합니다.',
  },
  en: {
    languageKorean: 'Korean',
    languageEnglish: 'English',
    dashboard: 'Dashboard',
    greeting: 'Hello',
    studentFallback: 'Student',
    stagePosition: 'You are currently at Stage {stage}',
    journeyLabel: 'SCOPE+ Journey Map',
    journeyCurrent: 'Current stop',
    journeySubtitle: 'Conversation-first, play-based exploration',
    journeyPromptStrengths: 'What makes you, you?',
    journeyPromptCuriosity: 'What do I want to explore more without committing?',
    journeyPromptOptions: 'What academic paths keep doors open and fit me?',
    journeyPromptProof: 'What experiences support or challenge my assumptions?',
    journeyPromptEvolve: 'Based on reflection, what should I keep, adjust, or drop?',
    journeyPromptStoryboard: 'Can I sketch the scenes of my future?',
    stage0Subtitle: 'Let\'s chat and discover together what energizes you, what brings you joy, and what you naturally gravitate toward',
    onboardingTag: 'Let\'s connect',
    onboardingTitle: 'Hi {name}, nice to meet you!',
    onboardingSubtitle: 'Let\'s chat & make friends. Share your thoughts, and if you\'d like, documents too.',
    onboardingGreeting: 'Hi, I\'m Mirae. We\'ll take this one step at a time.',
    onboardingIntro: 'When you think about school or activities, what usually gives you energy?',
    onboardingQuestion1: 'Tap what resonates.',
    onboardingAnswerProblem: 'Solving problems',
    onboardingAnswerHelping: 'Helping others',
    onboardingAnswerCreating: 'Creating things',
    onboardingAnswerUnsure: 'I am not sure yet',
    onboardingFollowUp: 'Thanks! Want to share one more?',
    onboardingThanks: 'Appreciate it. Ready to move ahead when you are.',
    onboardingPlaceholder: 'Share a thought, or skip if you like',
    onboardingUploadCta: 'Upload docs (portfolio, certificates, etc.)',
    onboardingUploadConfirm: 'Got your files!',
    onboardingKeywords: '{name}\'s Keywords',
    onboardingNextSteps: 'What\'s ahead',
    onboardingNextStep1: 'Discover more about yourself',
    onboardingNextStep2: 'Explore possibilities playfully',
    onboardingNextStep3: 'Sketch your future moments',
    onboardingFinish: 'Begin your journey',
    stage0Name: 'Strength Discovery',
    stage0Description: 'Learn about yourself',
    stage1Name: 'Role Roulette',
    stage1Description: 'Explore roles',
    stage2Name: 'Course Roadmap',
    stage2Description: 'Design your courses',
    stage3Name: 'Skill Translation',
    stage3Description: 'Map your growth journey',
    stage4Name: 'Tournament',
    stage4Description: 'Narrow specializations',
    stage5Name: 'Storyboard',
    stage5Description: 'Visualize your future',
    progressLabel: 'Journey progress',
    lockedShort: 'Locked',
    start: 'Start →',
    complete: 'Completed',
    locked: 'Finish the prior stage first',
    logout: 'Sign out',
    back: 'Back',
    home: 'Home',
    settingsOpen: 'Open settings',
    settingsClose: 'Close settings',
    settingsTitle: 'User settings',
    settingsEmailPlaceholder: 'No email on file',
    settingsAccount: 'Account',
    settingsAccountHint: 'Review your profile and journey preferences.',
    settingsMembership: 'SCOPE+ member',
    settingsStatus: 'Active',
    settingsLanguage: 'Language',
    settingsLanguageHint: 'Switch your preferred language.',
    // Stage 0
    stage0Question: 'What are you good at?',
    stage0OptionAnalytical: 'Analytical thinking',
    stage0OptionCreative: 'Creative expression',
    stage0OptionEmpathy: 'Empathy',
    stage0OptionOrganization: 'Organization',
    stage0Prev: '← Back',
    stage0Next: 'Next →',
    stage0Complete: 'Finish',
    stage0ProgressLabel: 'Question',
    // Stage 1
    stage1Hint: '← Not for me | Love it! | Interesting →',
    // Stage 2
    stage2Title: 'Course Selection Builder',
    stage2Subjects: 'Subjects',
    stage2Anchor: 'Anchor Choices',
    stage2Signal: 'Signal Choices',
    stage2AnchorCount: '({count}/6 selected)',
    stage2SignalCount: '({count}/6 selected)',
    stage2Save: 'Save selection',
    // Stage 3
    stage3Title: 'Skill Translation',
    stage3Empty: 'Hi! Tell me what skills you want to build from your chosen courses.',
    stage3Loading: 'AI is typing...',
    stage3Placeholder: 'Share your thoughts...',
    stage3Send: 'Send',
    stage3Finish: 'Finish conversation',
    // Stage 4
    stage4Title: 'Specialization Tournament',
    stage4Subtitle: 'Choose up to 3 specialization areas',
    stage4Selected: 'Selected',
    stage4Complete: 'Confirm choices',
    stage4Alignment: '{value}% alignment',
    specializationUxDesign: 'UX Design',
    specializationDataScience: 'Data Science',
    specializationSocialEntrepreneurship: 'Social Entrepreneurship',
    specializationContentCreation: 'Content Creation',
    // Stage 5
    stage5Title: 'Storyboard',
    stage5When: 'When do you want to see?',
    stage5Timeline1: '1 year from now (Year 2)',
    stage5Timeline3: '3 years from now (University)',
    stage5Timeline5: '5 years from now (Career)',
    stage5Generate: 'Generate storyboard',
    stage5StoryTitle: 'Your future story',
    stage5Finish: 'Finish',
    stage5Scene1Time: '8:00 AM',
    stage5Scene1: 'Morning: Working on a design project',
    stage5Scene2Time: '10:00 AM',
    stage5Scene2: 'Class: Human-centered design',
    stage5Scene3Time: '2:00 PM',
    stage5Scene3: 'Team meeting: Social impact project',
    loginHeroTitle: 'Begin your exploration journey',
    loginTestAccounts: 'Test Accounts',
    loginPasswordLabel: 'Password',
    loginEmailLabel: 'Email',
    loginButton: 'Log in',
    loginLoading: 'Logging in...',
    loginNoAccount: 'No account?',
    loginSignup: 'Sign up',
    loginPasswordValue: 'Password: password123',
    loginInvalid: 'Invalid email or password',
    loginPasswordHint: 'Password: password123',
    loginUseTest: 'Use the test accounts below',
    // Signup
    signupHeroTitle: 'Start a new journey',
    signupDisabledTitle: 'Sign up is disabled',
    signupDisabledBody: 'Please use the test accounts below.',
    signupNameLabel: 'Name',
    signupButton: 'Sign up',
    signupLoading: 'Signing up...',
    signupExistingAccount: 'Already have an account?',
    signupLogin: 'Log in',
    signupDisabledError: 'Sign up is disabled. Please use the test accounts below.',
  },
};

export function useI18n() {
  const { language, setLanguage, toggleLanguage } = useLanguageStore();

  const t = (key: string, vars?: Record<string, string | number>) => {
    const template = messages[language as Language]?.[key] ?? messages.ko[key] ?? key;
    if (!vars) return template;
    return template.replace(/\{(\w+)\}/g, (_, v) => String(vars[v] ?? ''));
  };

  return { t, language, setLanguage, toggleLanguage };
}
